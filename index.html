<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Yellow Basket ¬∑ Low Bandwidth Dreams</title>

<!-- FONTS -->
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500&family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
  font-family: 'IBM Plex Sans', system-ui, sans-serif;
  background: linear-gradient(160deg,#d7f3f7 0%,#fbe7ef 40%,#d9f3e1 80%,#fffdf9 100%);
  margin: 0; padding: 0; color: #222;
  overflow-x: hidden;
}
h1, h2, h3 { font-family: 'Space Grotesk', sans-serif; }
a { color: inherit; text-decoration: none; }

/* WRAPPER */
.container {
  max-width: 850px;
  margin: 0 auto;
  padding: 2rem;
}

/* HEADER */
header {
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.cart-counter {
  font-family:'Space Grotesk',sans-serif;
  background:#000;color:#fff;
  border-radius:30px;
  padding:0.4rem 0.9rem;
  font-size:0.9rem;
}

/* SALE TIMER */
.sale-banner {
  text-align:center;
  background:#000;
  color:#fff;
  padding:0.6rem 1rem;
  font-family:'Courier New', monospace;
  animation:blink 2s infinite alternate;
}
@keyframes blink { from{opacity:1;} to{opacity:0.7;} }

/* PRODUCTS GRID */
.products {
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(230px,1fr));
  gap:1.5rem;
  margin-top:2rem;
}
.product {
  background:#fffefc;
  border:1px solid #eee;
  border-radius:12px;
  padding:1rem;
  box-shadow:0 2px 5px rgba(0,0,0,0.05);
  transition:transform 0.2s;
}
.product:hover { transform:translateY(-4px); }
.product-title {
  cursor:pointer;
  position:relative;
  display:inline-block;
}
.product-title:hover { transform:skewX(-3deg); color:#000; }
.product-title::after {
  content:attr(data-text);
  position:absolute;left:0;top:0;width:100%;
  color:#ff00aa;opacity:0;
}
.product-title:hover::after {opacity:1;animation:glitch .2s infinite;}
@keyframes glitch {
  0%{clip-path:polygon(0 0,100% 0,100% 50%,0 50%);}
  50%{clip-path:polygon(0 50%,100% 50%,100% 100%,0 100%);}
  100%{clip-path:polygon(0 0,100% 0,100% 50%,0 50%);}
}
.product img {
  width:100%;border-radius:8px;margin-bottom:0.5rem;
}
button {
  background:#111;color:#fff;
  border:none;border-radius:6px;
  padding:0.5rem 1rem;cursor:pointer;
}
button:hover {background:#333;}

/* ALGORITHM SIDEBAR */
.sidebar {
  position:fixed;
  right:10px;top:50%;
  transform:translateY(-50%);
  width:180px;
  background:#fff;
  border:1px solid #ddd;
  border-radius:10px;
  padding:0.8rem;
  font-size:0.85rem;
  box-shadow:0 2px 10px rgba(0,0,0,0.05);
}
.sidebar h4 {
  font-family:'Space Grotesk';
  margin-top:0;margin-bottom:0.4rem;
  font-size:0.9rem;
}

/* FOOTER + TAGLINE */
footer {
  text-align:center;
  font-family:'Courier New', monospace;
  margin:3rem 0 2rem;
  font-size:0.85rem;
}

/* LOADER */
#loader {
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:'Courier New', monospace;
  flex-direction:column;
  transition:opacity 0.5s;
  z-index:999;
}
#loader.fade { opacity:0; pointer-events:none; }

@media(max-width:600px){
  .sidebar{display:none;}
}
</style>
</head>

<body>
<div id="loader">
  <div id="loaderLine">Loading dreams‚Ä¶</div>
</div>

<div class="container">
  <header>
    <h1>Yellow Basket</h1>
    <div class="cart-counter" id="cartCounter">üõí 0</div>
  </header>

  <div class="sale-banner">
    SALE ends when you feel okay again ¬∑ <span id="timer"></span>
  </div>

  <section class="products" id="products"></section>
</div>

<div class="sidebar" id="sidebar">
  <h4>Algorithm Recommends üåÄ</h4>
  <div id="recs"></div>
</div>

<footer>
  Shipped from Laguna ‚Äî may kagat lang ni Mowgli ‚Äî with love and lag. <br/>
  ¬© 2025 Low Bandwidth Dreams
</footer>

<!-- SOUND + LOGIC -->
<script>
// Ambient hum (low volume)
const hum = new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_41bbd209a8.mp3?filename=ambient-room-tone-10418.mp3");
hum.loop = true;
hum.volume = 0.08;
hum.play().catch(()=>{});

// Loader lines
const lines = [
  "Caching heartbreaks for offline use‚Ä¶",
  "Laguna Lake reflections detected‚Ä¶",
  "Shipping from Laguna‚Ä¶ please wait‚Ä¶",
  "Teka kumakain pa ako sa Maciang‚Äôs‚Ä¶",
  "Medj mainit pa yung lugaw sa Bonnette‚Äôs"
];
document.getElementById('loaderLine').innerText = lines[Math.floor(Math.random()*lines.length)];
setTimeout(()=>document.getElementById('loader').classList.add('fade'),1800);

// SALE TIMER
function startTimer(){
  let sec=59;
  setInterval(()=>{
    document.getElementById('timer').innerText="00:"+ (sec<10?"0"+sec:sec);
    sec--; if(sec<0) sec=59;
  },1000);
}
startTimer();

// Load products
fetch('data/products.json')
  .then(r=>r.json())
  .then(data=>{
    const wrap=document.getElementById('products');
    wrap.innerHTML=data.map((p,i)=>`
      <div class="product">
        <img src="assets/placeholder.svg" alt="${p.name}" />
        <h3 class="product-title" data-text="${p.name}">${p.name}</h3>
        <p>${p.desc}</p>
        <button onclick="addToCart('${p.name}')">Add to Cart</button>
      </div>
    `).join('');
    loadRecs(data);
  });

// Add to Cart logic
let cartCount=0;
function addToCart(name){
  const snd=new Audio('https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg');
  snd.play();
  cartCount++;
  document.getElementById('cartCounter').innerText="üõí "+cartCount;
  if(cartCount===3){window.location.href='cart.html';}
}

// Algorithm Recommends
function loadRecs(data){
  const recs=document.getElementById('recs');
  const randoms=data.sort(()=>0.5-Math.random()).slice(0,3);
  recs.innerHTML=randoms.map(r=>`<div>‚Ä¢ ${r.name}</div>`).join('');
}
</script>

  <!-- IMPULSE UPDATE ¬∑ Yellow Basket v7 -->
<style>
/* POPUP OVERLAY */
#impulsePopup {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(255,255,255,0.96);
  backdrop-filter: blur(5px);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  font-family: 'Space Grotesk', sans-serif;
  z-index: 9999;
  text-align: center;
  color: #111;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s;
}
#impulsePopup.active {
  opacity: 1;
  pointer-events: all;
}
#impulsePopup button {
  background: #111;
  color: #fff;
  border: none;
  padding: 0.7rem 1.3rem;
  border-radius: 8px;
  margin-top: 1rem;
  cursor: pointer;
}
#impulsePopup button:hover {
  background: #333;
}

/* PAYMENT MODAL */
#paymentModal {
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%,-50%);
  width: 320px;
  background: #fff;
  border: 2px solid #000;
  border-radius: 12px;
  padding: 1.2rem;
  font-family: 'IBM Plex Sans', sans-serif;
  z-index: 99999;
  display: none;
  box-shadow: 5px 5px 0 #000;
}
#paymentModal h3 {
  margin-top: 0;
  font-family: 'Space Grotesk', sans-serif;
}
#paymentModal label {
  display: block;
  margin: 0.5rem 0;
}
#paymentModal button {
  margin-top: 1rem;
  background: #000;
  color: #fff;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 8px;
  cursor: pointer;
}
</style>

<div id="impulsePopup">
  <h2>‚ö†Ô∏è Flash Deal: Emotional Stability (Ends in <span id="rushTimer">5:00</span>)</h2>
  <p>Detected location: <strong>98B Escolta Buma-Block Party</strong></p>
  <p>Hurry up bago ka ma-overthink ulit! Only 3 left (in your heart).</p>
  <button onclick="openPaymentModal()">Proceed to Checkout Now</button>
</div>

<div id="paymentModal">
  <h3>Choose a Payment Method</h3>
  <label><input type="radio" name="pay" checked> Exposure (Creative Credit)</label>
  <label><input type="radio" name="pay"> Card (VISA / Feeling Secure)</label>
  <label><input type="radio" name="pay"> E-Wallet (GCash / PayMaya / Emo Coins)</label>
  <label><input type="radio" name="pay"> NvrPayLater‚Ñ¢ (Sabay utang, sabay iyak)</label>
  <label><input type="radio" name="pay"> Flood Control Taxes (Charged to Barangay Budget)</label>
  <button onclick="completeImpulse()">Confirm Payment</button>
</div>

<script>
// Show popup after 10s or first add-to-cart
let impulseShown = false;
function showImpulsePopup(){
  if(impulseShown) return;
  impulseShown = true;
  document.getElementById('impulsePopup').classList.add('active');
  startRushTimer();
}
setTimeout(showImpulsePopup, 10000);

// Rush timer countdown
function startRushTimer(){
  let mins = 5, secs = 0;
  setInterval(()=>{
    secs--;
    if(secs < 0){ secs = 59; mins--; }
    if(mins < 0){ mins = 0; secs = 0; }
    document.getElementById('rushTimer').textContent = `${mins}:${secs<10?'0'+secs:secs}`;
  }, 1000);
}

// Open payment modal
function openPaymentModal(){
  document.getElementById('paymentModal').style.display = 'block';
}

// Complete fake checkout
function completeImpulse(){
  const paySound = new Audio('https://actions.google.com/sounds/v1/cartoon/pop.ogg');
  paySound.play();
  document.getElementById('paymentModal').innerHTML = `
    <h3>Processing payment...</h3>
    <p>Charged to: <strong>98B Escolta Flood Control Taxes</strong></p>
    <p>Thank you for your exposure.</p>
    <button onclick="window.location.href='receipt.html'">View Receipt</button>
  `;
}
</script>
<!-- END IMPULSE UPDATE -->

</body>
</html>
